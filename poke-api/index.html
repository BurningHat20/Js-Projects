<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pokémon Search</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <style>
      /* Optional custom styles */
      body {
        background-color: #f0f4f8; /* Light background */
      }
      .card {
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      .error-message {
        color: #e53e3e; /* Red error text */
      }
    </style>
  </head>
  <body class="flex justify-center items-center h-screen">
    <div class="max-w-lg w-full p-6 bg-white rounded-lg shadow-lg">
      <!-- Header -->
      <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-bold text-gray-800">Pokémon Search</h1>
        <input
          type="text"
          id="searchInput"
          placeholder="Enter Pokémon name"
          class="px-4 py-2 rounded-md shadow-sm border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        />
      </div>
      <!-- Main Content -->
      <div id="pokemonDetails" class="hidden">
        <div class="flex items-center justify-center mb-6">
          <img id="pokemonImage" class="w-32 h-32" src="" alt="Pokémon Image" />
        </div>
        <div class="text-center mb-4">
          <h2 id="pokemonName" class="text-xl font-semibold text-gray-800"></h2>
          <p id="pokemonId" class="text-gray-600"></p>
        </div>
        <div class="flex justify-around mb-4">
          <div class="text-center">
            <p class="font-semibold">Height</p>
            <p id="pokemonHeight"></p>
          </div>
          <div class="text-center">
            <p class="font-semibold">Weight</p>
            <p id="pokemonWeight"></p>
          </div>
        </div>
        <div class="text-center mb-4">
          <p class="font-semibold">Types</p>
          <div id="pokemonTypes" class="flex justify-center"></div>
        </div>
        <div class="text-center">
          <p class="font-semibold">Abilities</p>
          <div id="pokemonAbilities" class="flex justify-center"></div>
        </div>
      </div>
      <!-- Error Message -->
      <p
        id="errorMessage"
        class="error-message hidden text-sm text-red-600 mb-4"
      ></p>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const searchInput = document.getElementById("searchInput");
        const errorMessage = document.getElementById("errorMessage");
        const pokemonDetails = document.getElementById("pokemonDetails");
        const pokemonImage = document.getElementById("pokemonImage");
        const pokemonName = document.getElementById("pokemonName");
        const pokemonId = document.getElementById("pokemonId");
        const pokemonHeight = document.getElementById("pokemonHeight");
        const pokemonWeight = document.getElementById("pokemonWeight");
        const pokemonTypes = document.getElementById("pokemonTypes");
        const pokemonAbilities = document.getElementById("pokemonAbilities");

        const debounce = (func, delay) => {
          let timer;
          return function () {
            const context = this;
            const args = arguments;
            clearTimeout(timer);
            timer = setTimeout(() => {
              func.apply(context, args);
            }, delay);
          };
        };

        const fetchPokemon = async (pokemonName) => {
          try {
            const response = await fetch(
              `https://pokeapi.co/api/v2/pokemon/${pokemonName.toLowerCase()}`
            );
            if (!response.ok) {
              throw new Error("Pokemon not found!");
            }
            const data = await response.json();
            displayPokemon(data);
            errorMessage.textContent = "";
            errorMessage.classList.add("hidden");
          } catch (error) {
            console.error("Error fetching Pokemon:", error);
            displayError("Pokemon not found!");
          }
        };

        const displayPokemon = (pokemon) => {
          pokemonImage.src = pokemon.sprites.front_default;
          pokemonName.textContent = pokemon.name;
          pokemonId.textContent = `ID: ${pokemon.id}`;
          pokemonHeight.textContent = `Height: ${pokemon.height * 10} cm`; // Convert decimetres to centimeters
          pokemonWeight.textContent = `Weight: ${pokemon.weight / 10} kg`; // Convert hectograms to kilograms

          pokemonTypes.innerHTML = "";
          pokemon.types.forEach((type) => {
            const typeElement = document.createElement("span");
            typeElement.textContent = type.type.name;
            typeElement.classList.add(
              "inline-block",
              "px-2",
              "py-1",
              "mr-2",
              "mb-2",
              "text-sm",
              "font-semibold",
              "rounded",
              "bg-blue-200",
              "text-blue-800"
            );
            pokemonTypes.appendChild(typeElement);
          });

          pokemonAbilities.innerHTML = "";
          pokemon.abilities.forEach((ability) => {
            const abilityElement = document.createElement("span");
            abilityElement.textContent = ability.ability.name;
            abilityElement.classList.add(
              "inline-block",
              "px-2",
              "py-1",
              "mr-2",
              "mb-2",
              "text-sm",
              "font-semibold",
              "rounded",
              "bg-green-200",
              "text-green-800"
            );
            pokemonAbilities.appendChild(abilityElement);
          });

          pokemonDetails.classList.remove("hidden");
        };

        const displayError = (message) => {
          errorMessage.textContent = message;
          errorMessage.classList.remove("hidden");
          pokemonDetails.classList.add("hidden");
        };

        searchInput.addEventListener(
          "input",
          debounce(() => {
            const pokemonName = searchInput.value.trim();
            if (pokemonName) {
              fetchPokemon(pokemonName);
            } else {
              displayError("Enter a Pokémon name");
            }
          }, 500)
        );
      });
    </script>
  </body>
</html>
